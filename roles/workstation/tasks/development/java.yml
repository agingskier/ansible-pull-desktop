---
- name: software | java block
  block:
    - name: Software | java | install java environment
      apt:
        pkg:
          - default-jdk
          - "{{ openjdk_version }}"

# Check: https://gluonhq.com/products/javafx/ for latest release
    - name: software | javafx | Unzip javafx
      become: yes
      become_method: sudo
      unarchive:
        src: https://download2.gluonhq.com/openjfx/{{ javafx_version }}/openjfx-{{ javafx_version }}_linux-x64_bin-sdk.zip
        dest: /opt
        remote_src: yes
        owner: root
        group: root
        mode: 0755

    - name: software | java & javafx | Replace export statements in .bashrc
      lineinfile:
        path: /home/{{ user_name }}/.bashrc
        regexp: "{{ item.regex }}"
        line: "{{ item.repl }}"
      with_items:
        - { regex: '^export PATH_TO_FX=', repl: 'export PATH_TO_FX=/opt/javafx-sdk-{{ javafx_version }}/lib' }
        - { regex: '^export CLASSPATH=', repl: 'export CLASSPATH=.:/usr/lib/jvm/{{ jdk-classpath_version }}/lib:$PATH_TO_FX' }
  when:
    - java is defined
    - java
