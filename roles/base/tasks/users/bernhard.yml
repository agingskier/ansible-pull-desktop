---

- name: users | bernhard | add sudoers file
  copy:
    src: users/sudoers_bernhard
    dest: /etc/sudoers.d/bernhard
    owner: root
    group: root
    mode: 0440

- name: users | bernhard | create vim directories
  file:
    path: /home/bernhard/{{ item.dir }}
    state: directory
    owner: bernhard
    group: users
    mode: 0700
  with_items:
    - { dir: '.vim' }
    - { dir: '.vim/autoload' }
    - { dir: '.vim/bundle' }
    - { dir: '.vim/colors' }
    - { dir: '.vim/ftplugin' }

- name: users | bernhard | copy dotfiles
  copy:
    src: users/bernhard/{{ item.src }}
    dest: /home/bernhard/{{ item.dest }}
    owner: bernhard
    group: users
    mode: 0600
  with_items:
    - { src: 'bash/bash_aliases', dest: '.bash_aliases' }
    - { src: 'bash/bash_functions', dest: '.bash_functions' }
    - { src: 'bash/bashrc', dest: '.bashrc' }
    - { src: 'bash/dircolors', dest: '.dircolors' }
    - { src: 'bash/conkyrc', dest: '.conkyrc' }
    - { src: 'bash/tilix-split.json', dest: 'tilix-split.json' }
    - { src: 'vim/vimrc', dest: '.vimrc' }
    - { src: 'vim/gvimrc', dest: '.gvimrc' }
    - { src: 'autostart/conky_autostart', dest: '.config/autostart/conky.desktop' }
    - { src: 'autostart/tilix_autostart', dest: '.config/autostart/tilix.desktop' }
    - { src: 'tmux/tmux_config', dest: '.tmux.conf' }
    - { src: 'tmux/tmux_setup_config', dest: 'tmux-setup.conf'}

- name: users | bernhard | copy vim ftype files
  copy:
    src: users/bernhard/vim/{{ item.src }}
    dest: /home/bernhard/.vim/ftplugin/{{ item.src }}
    owner: bernhard
    group: users
    mode: 0600
  with_items:
    - { src: 'cmake.vim' }
    - { src: 'cpp.vim' }
    - { src: 'html.vim' }
    - { src: 'perl.vim' }
    - { src: 'python.vim' }
    - { src: 'ruby.vim' }
    - { src: 'sql.vim' }
    - { src: 'xml.vim' }
    - { src: 'folding.vim' }  # open fold: zo | close fold zM

- name: users | bernhard | download pathogen & color vim files from github 
  become: true
  get_url:
    url: "https://raw.githubusercontent.com/{{ item.url }}"
    dest: "/home/bernhard/.vim/{{ item.dest }}"
    owner: bernhard
    group: users
    mode: 0600
  with_items:
    - { url: 'tpope/vim-pathogen/master/autoload/pathogen.vim', dest: 'autoload/pathogen.vim' }
    - { url: 'nanotech/jellybeans.vim/master/colors/jellybeans.vim', dest: 'colors/jellybeans.vim' }
    - { url: 'vim-scripts/xoria256.vim/master/colors/xoria256.vim', dest: 'colors/xoria256.vim' } 
    - { url: 'crusoexia/vim-monokai/blob/master/colors/monokai.vim', dest: 'colors/monokai.vim' }
    - { url: 'jaredgorski/SpaceCamp/master/colors/spacecamp.vim', dest: 'colors/spacecamp.vim' }
    - { url: 'dracula/vim/master/colors/dracula.vim', dest: 'colors/dracula.vim' }
    - { url: 'morhetz/gruvbox/master/colors/gruvbox.vim', dest: 'colors/gruvbox.vim' }
    - { url: 'NLKNguyen/papercolor-theme/master/colors/PaperColor.vim', dest: 'colors/PaperColor.vim' }
    - { url: 'rafalbromirski/vim-aurora/master/colors/aurora.vim', dest: 'colors/aurora.vim' }

- name: users | bernhard | pathogen plug manager | git checkout bundle repositories
  become: true
  git:
    repo: "{{ item.repo }}"
    dest: "{{ item.dest }}"
    version: master
    force: true
  with_items:
    - { repo: 'https://github.com/vim-airline/vim-airline.git', dest: '/home/bernhard/.vim/bundle/vim-airline' }  # status line
    - { repo: 'https://github.com/vim-airline/vim-airline-themes.git', dest: '/home/bernhard/.vim/bundle/vim-airline-themes' }
    - { repo: 'https://github.com/pearofducks/ansible-vim', dest: '/home/bernhard/.vim/bundle/ansible-vim' }     # highlight syntax
    - { repo: 'https://github.com/Yggdroot/indentLine.git', dest: '/home/bernhard/.vim/bundle/indentLine' }
    - { repo: 'https://github.com/vim-syntastic/syntastic.git', dest: '/home/bernhard/.vim/bundle/syntastic' } # syntax checker 
    - { repo: 'https://github.com/frazrepo/vim-rainbow.git', dest: '/home/bernhard/.vim/bundle/vim-rainbow' } # colors for different brackets   
    - { repo: 'https://github.com/ryanoasis/vim-devicons.git', dest: '/home/bernhard/.vim/bundle/vim-devicons' } # Dev Icons
    - { repo: 'https://github.com/adelarsq/vim-emoji-icon-theme.git', dest: '/home/bernhard/.vim/bundle/vim-emoji-icon-theme' } # Emoji
#    - { repo: 'https://github.com/rhysd/vim-grammarous.git', dest: '/home/bernhard/.vim/bundle/vim-grammarous' }
#    - { repo: 'https://github.com/ron89/thesaurus_query.vim', dest: '/home/bernhard/.vim/bundle/thesaurus_query.vim' }
    - { repo: 'https://github.com/scrooloose/nerdtree.git', dest: '/home/bernhard/.vim/bundle/nerdtree' }
#    - { repo: 'https://github.com/tpope/vim-obsession.git', dest: '/home/bernhard/.vim/bundle/vim-obsession' } # remember sessions
  notify: update_vim_bundle_perms

