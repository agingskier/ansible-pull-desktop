- name: Create ansible user
  user:
    name: ansible
    system: yes

- name: users | ansible | add public key
  tags: dotfiles,ansible,ssh,ssh-keys,users
  authorized_key:
    user: ansible
    key: "{{ item }}"
  with_file:
    - "{{ lookup('file', 'https://github.com/agingskier.keys') }}"
#    - only with file and lookup public key (others possible)

- name: users | ansible | add sudoers file
  tags: ansible,sudo,system,users
  copy:
    src: users/sudoers_ansible
    dest: /etc/sudoers.d/ansible
    owner: root
    group: root
    mode: 0440
